#!/bin/sh
# Script to configure X, start common apps, and start xmonad.
# Author: Vic Fryzel
# http://github.com/vicfryzel/xmonad-config

# Configure PATH so that we can access our scripts below
export PATH=$PATH:~/.xmonad/bin:~/.local/bin:~/.gem/ruby/2.4.0/bin:/opt/qt5pi/tools/arm-bcm2708/gcc-linaro-arm-linux-gnueabihf-raspbian-x64/bin

#Xmonad specific setups
if [ $(echo "$DESKTOP_SESSION" | grep "xmonad") ]
then
    # Configure X
    xsetroot -cursor_name left_ptr &
    xrdb -merge ~/.Xdefaults &

    # Start a window compositor. This ensures Google Chrome paints correctly.
    xcompmgr -n &

    # Start the system tray
    tray &

    # Starting Audio Server #migrate to systemd service
    #pulseaudio --daemonize --verbose &

    #Set num lock on
    numlockx on &

    # Start screensaver
    xscreensaver -no-splash &
    xss-lock -- xscreensaver-command -lock &

    #Starting polkit agent
    /usr/lib/polkit-kde-authentication-agent-1 &

    # Start automount daemon with disabled notifications
    udiskie -N -t --use-udisks2 &
    
    # Export to properly use kde apps
    export XDG_CURRENT_DESKTOP=kde
    
fi

#Plasma specific setups
if [ $(echo "$DESKTOP_SESSION" | grep "plasma") ]
then
    echo ""
    
fi
